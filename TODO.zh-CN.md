# TODO（待办）

## P1 核心功能

- [x] 增加存档/读档系统（角色属性、背包、装备、地图种子、当前状态）。
  - 已完成：`game/save.rs` 实现序列化，并在 `game/state.rs` 接入 `k`/`l` 热键。
  - 验收：新增回放测试 `game::save::tests::save_round_trip_restores_exact_state`。
- [x] 增加一次性地图内容（宝箱、NPC 交互点、已清理标记）。
  - 已完成：`game/world.rs` 生成对象，`WorldObjects` 跟踪并持久化状态。
  - 验收：对象状态可在本局与存档中保持一致。
- [x] 增加完整流程集成测试（城镇 -> 战斗 -> 升级 -> Boss）。
  - 已完成：`tests/full_flow.rs` 固定种子全流程测试。
  - 验收：`cargo test` 稳定通过。

## P2 结构与可维护性

- [x] 拆分 UI 子模块（`ui/map.rs`、`ui/sidebar.rs`、`ui/footer.rs`）。
  - 已完成：`ui.rs` 仅保留组合渲染职责。
- [x] 支持难度配置（easy/normal/hard）并由配置文件驱动。
  - 已完成：`config/difficulty.toml` + `game/config.rs` 运行时加载。
  - 验收：无需改代码即可切换遭遇/事件/战斗缩放参数。
- [x] 增加文本本地化层，统一管理所有界面文案。
  - 已完成：`rust-i18n` + `en/zh-CN/zh-TW/ja/ko` 词条，已覆盖新增功能文案。
- [x] 增加游戏内设置页，可运行时切换语言。
  - 已完成：探索/城镇中按 `o` 进入设置页。

## P3 玩法打磨

- [x] 增加事件提示层（近期事件横幅/收益展示更清晰）。
  - 已完成：新增 `recent_event` 横幅并统一展示关键收益反馈。
- [x] 扩展城镇交互（治疗师、旅店、简易任务钩子）。
  - 已完成：新增 `5..7` 城镇服务与任务流。
- [x] 增加敌人技能模式，提升战斗多样性。
  - 已完成：按敌人风格触发差异化技能行为。
